!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.partial=n()}(this,function(){"use strict";function t(t,n,i,e){return function(r,o){var u=e(t,n,i);return"function"==typeof u?u(r,o):u}}function n(i,e,r){var o={};for(var u in r||{})"function"==typeof r[u]?o[u]=t(i,e,o,r[u]):o[u]=n(i[u],e[u],r[u]);return o}function i(t){return t.partials=t.partials||{},t.state=t.state||{},t.actions=t.actions||{},t.views=t.views||{},t.init=[].concat(t.init||[]),Object.keys(t.partials).forEach(function(n){var e=i(t.partials[n]);t.state[n]=e.state,t.actions[n]=e.actions,t.views[n]=e.views,t.init=t.init.concat(function(t,n){return n.map(function(n){return function(i){n(i[t])}})}(n,e.init))}),t}return function(t){return function(e,r){var o=i(e),u=o.view;o.view=function(t,i){return u(t,i,n(t,i,o.views))};var a=t(o,r);return o.init.forEach(function(t){t(a)}),a}}});